<footer class="bg-[#e8d7c3] site-footer">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    
    <!-- Main footer content -->
    <div class="py-8 sm:py-12 lg:py-16 text-center">
      <div class="space-y-8 lg:space-y-12">
        
        <!-- Brand section -->
        <div>
          <div class="flex flex-col items-center space-y-4">
            <img src="/assets/images/flowHavenTransparent.png" alt="FlowHaven Studios" 
                 class="h-10 sm:h-12 w-auto" />
            <p class="text-sm sm:text-base text-[#845d45] text-center font-quicksand leading-relaxed max-w-xs">
              boutique reformer pilates studio in bethnal green. find your flow.
            </p>
            <!-- Social media links -->
            <div class="flex space-x-4 sm:space-x-6 justify-center">
              <a href="https://www.instagram.com/flowhavenstudios?igsh=Z3k2djhwazl0NXRl&utm_source=qr" 
                 target="_blank" rel="noopener noreferrer"
                 class="text-[#845d45] hover:text-[#6e4635] transition-colors duration-200 p-2 rounded-full hover:bg-[#845d45]/10"
                 aria-label="Follow us on Instagram">
                <svg class="h-5 w-5 sm:h-6 sm:w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2Zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5a4.25 4.25 0 0 0 4.25-4.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5Zm8.75 2.25a.75.75 0 0 1 .75.75v1a.75.75 0 0 1-1.5 0v-1a.75.75 0 0 1 .75-.75Zm-4 1.25a5.5 5.5 0 1 1 0 11a5.5 5.5 0 0 1 0-11Zm0 1.5a4 4 0 1 0 0 8a4 4 0 0 0 0-8Z" />
                </svg>
              </a>
              <a href="https://www.tiktok.com/@flowhavenstudios?_t=ZN-8yKnbkG5uYY&_r=1" 
                 target="_blank" rel="noopener noreferrer"
                 class="text-[#845d45] hover:text-[#6e4635] transition-colors duration-200 p-2 rounded-full hover:bg-[#845d45]/10"
                 aria-label="Follow us on TikTok">
                <svg class="h-5 w-5 sm:h-6 sm:w-6" fill="currentColor" viewBox="0 0 48 48" aria-hidden="true">
                  <path d="M41.4 15.1c-3.1 0-5.7-1.2-7.8-3V32c0 6.7-5.5 12.2-12.2 12.2S9.2 38.7 9.2 32s5.5-12.2 12.2-12.2c.9 0 1.7.1 2.5.3V26c-.8-.3-1.6-.5-2.5-.5-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6V4h6c.1 2.9 2.6 5.2 5.5 5.2v5.9z"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
        
        <!-- Navigation and Contact in a grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12 max-w-4xl mx-auto">
          
          <!-- Quick Links -->
          <div class="text-center">
            <h3 class="text-sm sm:text-base font-semibold text-[#2b2a24] font-quicksand mb-4">
              quick links
            </h3>
            <ul class="space-y-2 sm:space-y-3">
              <li>
                <a href="/" 
                   class="text-sm sm:text-base text-[#845d45] hover:text-[#6e4635] transition-colors duration-200 font-quicksand">
                  home
                </a>
              </li>
              <li>
                <a href="/book" 
                   class="text-sm sm:text-base text-[#845d45] hover:text-[#6e4635] transition-colors duration-200 font-quicksand">
                  book a class
                </a>
              </li>
              <li>
                <a href="/faq" 
                   class="text-sm sm:text-base text-[#845d45] hover:text-[#6e4635] transition-colors duration-200 font-quicksand">
                  faq
                </a>
              </li>
              <li>
                <a href="/termsandconditions" 
                   class="text-sm sm:text-base text-[#845d45] hover:text-[#6e4635] transition-colors duration-200 font-quicksand">
                  terms & conditions
                </a>
              </li>
            </ul>
          </div>
          
          <!-- Contact Info -->
          <div class="text-center">
            <h3 class="text-sm sm:text-base font-semibold text-[#2b2a24] font-quicksand mb-4">
              contact
            </h3>
            <div class="space-y-2 sm:space-y-3">
              <p class="text-sm sm:text-base text-[#845d45] font-quicksand">
                <span class="block font-medium">email:</span>
                <a href="mailto:hello@flowhavenstudios.com" 
                   class="hover:text-[#6e4635] transition-colors duration-200">
                  hello@flowhavenstudios.com
                </a>
              </p>
              <div class="text-sm sm:text-base text-[#845d45] font-quicksand">
                <span class="block font-medium mb-1">location:</span>
                <address class="not-italic leading-relaxed">
                  pillbox, unit g01<br>
                  115 coventry road<br>
                  bethnal green<br>
                  london e2 6gh
                </address>
              </div>
            </div>
          </div>
        
        </div>
      </div>
    </div>
    
    <!-- Newsletter signup with fixed Mindbody widget -->
<div class="border-t border-[#845d45]/20 py-6 sm:py-8">
  <div class="text-center">
    <h3 class="text-sm sm:text-base font-semibold text-[#2b2a24] font-quicksand mb-3 sm:mb-4">
      stay in the flow
    </h3>
    <p class="text-xs sm:text-sm text-[#845d45] font-quicksand mb-4 max-w-md mx-auto">
      get updates on new classes, workshops, and special offers
    </p>
    
    <!-- Mindbody Widget Container -->
    <div class="max-w-md mx-auto mindbody-footer-widget">
      <script src="https://widgets.mindbodyonline.com/javascripts/healcode.js" type="text/javascript"></script>
      <healcode-widget 
        data-type="prospects" 
        data-widget-partner="object" 
        data-widget-id="045996020e8" 
        data-widget-version="0">
      </healcode-widget>
    </div>
  </div>
</div>

<style>
/* Mindbody Footer Widget - Fixed Styling */
.mindbody-footer-widget {
  position: relative;
}

/* Widget container */
.mindbody-footer-widget healcode-widget,
.mindbody-footer-widget [data-widget-id="045996020e8"] {
  display: block !important;
  width: 100% !important;
}

/* Iframe styling */
.mindbody-footer-widget iframe {
  width: 100% !important;
  min-height: 120px !important;
  border: none !important;
  border-radius: 8px !important;
  background-color: transparent !important;
}

/* Override all Mindbody default styles */
.mindbody-footer-widget * {
  font-family: 'Quicksand', sans-serif !important;
  box-sizing: border-box !important;
}

/* Form container - force horizontal layout */
.mindbody-footer-widget form,
.mindbody-footer-widget div[class*="form"],
.mindbody-footer-widget div[class*="container"] {
  background-color: transparent !important;
  padding: 0 !important;
  margin: 0 !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 12px !important;
  align-items: stretch !important;
  width: 100% !important;
}

/* Horizontal layout on larger screens */
@media (min-width: 640px) {
  .mindbody-footer-widget form,
  .mindbody-footer-widget div[class*="form"],
  .mindbody-footer-widget div[class*="container"] {
    flex-direction: row !important;
    align-items: center !important;
  }
}

/* Input fields - match your original form exactly */
.mindbody-footer-widget input[type="text"],
.mindbody-footer-widget input[type="email"],
.mindbody-footer-widget input[type="tel"],
.mindbody-footer-widget input,
.mindbody-footer-widget select {
  flex: 1 !important;
  width: 100% !important;
  padding: 8px 16px !important;
  border: 1px solid rgba(132, 93, 69, 0.3) !important;
  border-radius: 8px !important;
  background-color: white !important;
  color: #2b2a24 !important;
  font-family: 'Quicksand', sans-serif !important;
  font-size: 14px !important;
  margin: 0 !important;
  box-sizing: border-box !important;
  min-height: 40px !important;
}

@media (min-width: 640px) {
  .mindbody-footer-widget input[type="text"],
  .mindbody-footer-widget input[type="email"],
  .mindbody-footer-widget input[type="tel"],
  .mindbody-footer-widget input,
  .mindbody-footer-widget select {
    padding: 12px 16px !important;
    font-size: 16px !important;
    min-height: 48px !important;
  }
}

/* Placeholder styling */
.mindbody-footer-widget input::placeholder {
  color: rgba(132, 93, 69, 0.6) !important;
  opacity: 1 !important;
}

/* Focus states */
.mindbody-footer-widget input:focus,
.mindbody-footer-widget select:focus {
  outline: none !important;
  border-color: #845d45 !important;
  box-shadow: 0 0 0 2px rgba(132, 93, 69, 0.1) !important;
}

/* Submit button - match your original exactly */
.mindbody-footer-widget button[type="submit"],
.mindbody-footer-widget input[type="submit"],
.mindbody-footer-widget button,
.mindbody-footer-widget .submit-button,
.mindbody-footer-widget [class*="submit"],
.mindbody-footer-widget [class*="button"] {
  flex-shrink: 0 !important;
  padding: 8px 16px !important;
  background-color: #845d45 !important;
  color: white !important;
  border: none !important;
  border-radius: 8px !important;
  font-family: 'Quicksand', sans-serif !important;
  font-weight: 500 !important;
  font-size: 14px !important;
  cursor: pointer !important;
  transition: all 0.2s ease !important;
  margin: 0 !important;
  white-space: nowrap !important;
  min-width: auto !important;
  width: auto !important;
  min-height: 40px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

@media (min-width: 640px) {
  .mindbody-footer-widget button[type="submit"],
  .mindbody-footer-widget input[type="submit"],
  .mindbody-footer-widget button,
  .mindbody-footer-widget .submit-button,
  .mindbody-footer-widget [class*="submit"],
  .mindbody-footer-widget [class*="button"] {
    padding: 12px 24px !important;
    font-size: 16px !important;
    min-height: 48px !important;
  }
}

/* Button hover effects */
.mindbody-footer-widget button:hover,
.mindbody-footer-widget input[type="submit"]:hover,
.mindbody-footer-widget .submit-button:hover,
.mindbody-footer-widget [class*="submit"]:hover,
.mindbody-footer-widget [class*="button"]:hover {
  background-color: #6e4635 !important;
  transform: scale(0.95) !important;
}

/* Button focus states */
.mindbody-footer-widget button:focus,
.mindbody-footer-widget input[type="submit"]:focus,
.mindbody-footer-widget .submit-button:focus {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(132, 93, 69, 0.3) !important;
}

/* Hide any widget titles */
.mindbody-footer-widget h1,
.mindbody-footer-widget h2,
.mindbody-footer-widget h3,
.mindbody-footer-widget h4,
.mindbody-footer-widget .title,
.mindbody-footer-widget .header,
.mindbody-footer-widget [class*="title"],
.mindbody-footer-widget [class*="header"] {
  display: none !important;
}

/* Hide labels to keep it minimal */
.mindbody-footer-widget label {
  display: none !important;
}

/* Loading spinner override */
.mindbody-footer-widget .spinner,
.mindbody-footer-widget .loading,
.mindbody-footer-widget [class*="spinner"],
.mindbody-footer-widget [class*="loading"] {
  color: #845d45 !important;
}

/* Success message styling */
.mindbody-footer-widget .success,
.mindbody-footer-widget .success-message,
.mindbody-footer-widget [class*="success"] {
  background-color: #d1fae5 !important;
  color: #065f46 !important;
  border-radius: 8px !important;
  padding: 12px !important;
  text-align: center !important;
  margin: 12px 0 !important;
  font-size: 14px !important;
  font-family: 'Quicksand', sans-serif !important;
}

/* Error message styling */
.mindbody-footer-widget .error,
.mindbody-footer-widget .error-message,
.mindbody-footer-widget [class*="error"] {
  background-color: #fee2e2 !important;
  color: #991b1b !important;
  border-radius: 8px !important;
  padding: 8px 12px !important;
  margin: 8px 0 !important;
  font-size: 12px !important;
  text-align: center !important;
  font-family: 'Quicksand', sans-serif !important;
}

/* Force remove any conflicting margins/padding */
.mindbody-footer-widget > * {
  margin: 0 !important;
  padding: 0 !important;
}

/* Hide Mindbody branding if needed */
.mindbody-footer-widget [class*="powered"],
.mindbody-footer-widget [class*="mindbody"],
.mindbody-footer-widget .mb-attribution {
  position: absolute !important;
  bottom: -30px !important;
  right: 0 !important;
  font-size: 10px !important;
  opacity: 0.5 !important;
}

/* Mobile responsiveness */
@media (max-width: 639px) {
  .mindbody-footer-widget {
    margin: 0 -10px !important;
  }
  
  .mindbody-footer-widget iframe {
    min-height: 140px !important;
  }
  
  .mindbody-footer-widget input,
  .mindbody-footer-widget button {
    min-height: 44px !important;
  }
}

/* Fix any grid/flexbox issues */
.mindbody-footer-widget div {
  display: block !important;
}

.mindbody-footer-widget form div,
.mindbody-footer-widget div[class*="form"] div {
  display: flex !important;
}

/* Ensure proper alignment */
.mindbody-footer-widget form,
.mindbody-footer-widget div[class*="form"] {
  justify-content: center !important;
  align-items: center !important;
  max-width: 100% !important;
}

/* Button Position Adjustments */

/* Move button slightly right and up */
.mindbody-footer-widget button[type="submit"],
.mindbody-footer-widget input[type="submit"],
.mindbody-footer-widget button,
.mindbody-footer-widget .submit-button,
.mindbody-footer-widget [class*="submit"],
.mindbody-footer-widget [class*="button"] {
  margin-left: 8px !important; /* Move right */
  margin-top: -15px !important; /* Move up */
  position: relative !important;
  top: -2px !important; /* Additional upward adjustment */
}

/* For mobile - keep original positioning */
@media (max-width: 639px) {
  .mindbody-footer-widget button[type="submit"],
  .mindbody-footer-widget input[type="submit"],
  .mindbody-footer-widget button,
  .mindbody-footer-widget .submit-button,
  .mindbody-footer-widget [class*="submit"],
  .mindbody-footer-widget [class*="button"] {
    margin-left: 0 !important;
    margin-top: 0 !important;
    top: 0 !important;
  }
}

/* Alternative approach - adjust the entire form alignment */
.mindbody-footer-widget form,
.mindbody-footer-widget div[class*="form"],
.mindbody-footer-widget div[class*="container"] {
  align-items: flex-start !important; /* Align to top instead of center */
}

/* Fine-tune input field to align with adjusted button */
.mindbody-footer-widget input[type="text"],
.mindbody-footer-widget input[type="email"],
.mindbody-footer-widget input[type="tel"],
.mindbody-footer-widget input,
.mindbody-footer-widget select {
  margin-top: 0 !important; /* Keep input at baseline */
}
</style>

<script>
// Handle success state properly
document.addEventListener('DOMContentLoaded', function() {
  // Wait for widget to load
  setTimeout(function() {
    const widget = document.querySelector('.mindbody-footer-widget');
    if (!widget) return;
    
    // Create a mutation observer to watch for success messages
    const observer = new MutationObserver(function(mutations) {
      mutations.forEach(function(mutation) {
        mutation.addedNodes.forEach(function(node) {
          if (node.nodeType === 1) { // Element node
            // Check if success message was added
            const successEl = node.querySelector 
              ? node.querySelector('[class*="success"], .success-message, .thank') 
              : null;
            
            if (successEl || (node.className && node.className.includes('success'))) {
              console.log('Success message detected');
              
              // Hide spinner if it exists
              const spinners = widget.querySelectorAll('.spinner, .loading, [class*="spinner"], [class*="loading"]');
              spinners.forEach(spinner => {
                spinner.style.display = 'none';
              });
              
              // Show custom success message
              showCustomSuccess();
            }
          }
        });
      });
    });
    
    // Start observing
    observer.observe(widget, {
      childList: true,
      subtree: true,
      attributes: true,
      attributeFilter: ['class']
    });
    
    // Also check for form submission events
    const forms = widget.querySelectorAll('form');
    forms.forEach(form => {
      form.addEventListener('submit', function() {
        console.log('Form submitted');
        // Set a timeout to show success after typical API response time
        setTimeout(function() {
          const stillLoading = widget.querySelector('.spinner, .loading, [class*="spinner"], [class*="loading"]');
          if (stillLoading && stillLoading.style.display !== 'none') {
            showCustomSuccess();
          }
        }, 3000); // 3 second timeout
      });
    });
  }, 2000);
});

function showCustomSuccess() {
  const widget = document.querySelector('.site-footer .mindbody-footer-widget');
  if (!widget) return;
  
  // Hide the form
  const forms = widget.querySelectorAll('form, iframe');
  forms.forEach(form => {
    form.style.display = 'none';
  });
  
  // Create custom success message
  const successDiv = document.createElement('div');
  successDiv.className = 'custom-success-message';
  successDiv.innerHTML = `
    <div style="
      background-color: #d1fae5;
      color: #065f46;
      border-radius: 8px;
      padding: 16px;
      text-align: center;
      font-family: 'Quicksand', sans-serif;
      font-size: 14px;
      margin: 12px 0;
    ">
      âœ“ Thanks! You're now subscribed to our updates.
    </div>
  `;
  
  widget.appendChild(successDiv);
  
  // Reset after 5 seconds
  setTimeout(function() {
    successDiv.remove();
    forms.forEach(form => {
      form.style.display = '';
    });
  }, 5000);
}
</script>

<?php include 'scripts.php'; ?>
</body>
</html>